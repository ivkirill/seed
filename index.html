<!DOCTYPE>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
    <title>Berry Index</title>
    
    <script type="text/javascript" charset="UTF-8" src="berry.js"></script>
  </head>
  <body>
    <script>
		
		define('module1', function() {
			console.log('TEST A', arguments, this);
			return 'g';
		});		

		define('module2', {path: '/js/berry/berry.test.js'}, function(a, b) {
			console.log('TEST TEST', this, a, b);
			return 'c';
		});
				
		// определение модуля 'jquery.1.12.4' с указанным path в обьекте (изменено следование аргументов для примера работы)
		define('jquery.1.12.4', {path: 'https://code.jquery.com/jquery-1.12.4.min.js'}, function() {
			console.log('jQuery version', $.fn.jquery, this);
			return $;
		});
		
		// определение модуля 'jquery.2.2.4' с указанным path в обьекте (изменено следование аргументов для примера работы)
		define('jquery.2.2.4', {path: 'https://code.jquery.com/jquery-2.2.4.min.js'}, function() {
			console.log('jQuery version', $.fn.jquery, this);
			return $;
		});

		/*		
		// определение модуля 'menu'
		define('menu2', [ true, 'common.cookie'], function() {
			var a = 1;
			return a;
		});			
  	
		// определение модуля 'oldmenu' с поддержкой обратной совместимости
		$.define('oldmenu', function() {
			console.log("module 'oldmenu' loaded");
			var a = 2;
			return a;
		});

		// определение модуля 'item' с зависимостью от модуля 'menu'
		define('item', ['menu'], function() {
			console.log("module 'item' loaded, depence from 'menu'");
		});

		// определение модуля 'jquery.1.7.1' с указанным path в обьекте
		define('jquery.1.7.1', {path: 'https://code.jquery.com/jquery-1.7.1.min.js'}, function() {
			console.log("module 'jquery.1.7.1' loaded", arguments);
			
			return $;
		});


		
		//кастомный список плагинов проекта
		var plugins = {
			"test.module" : {
				"path" : "berry.test.js"
			},
			"jquery.1.7.1" : {
				"path" : "https://code.jquery.com/jquery-1.7.1.min.js",
				"callback" : function() {
					return 123;
				}
			},
			"jquery.1.12.4" : {
				"path" : "https://code.jquery.com/jquery-1.12.4.min.js"
			},
			"jquery.2.2.4" : {
				"path" : "https://code.jquery.com/jquery-2.2.4.min.js"
			}
		}
      
		define(plugins, function() {
			console.log('Custom plugins loaded');
		});
	  
		// определение модуля 'live', с зависмостью от модуля 'jquery.1.7.1'
		define('live', ['menu', 'sub-menu', 'jquery.1.7.1'], function(scope) {
			console.log('live scope вне функции:', scope);
			console.log('live scope вне функции:',$.fn, $, window.jQuery)			
			
			return (function(m, s, jq) {
				console.log('live callback: ', m, s, jq);
			})(scope['menu'], scope['sub-menu'], scope['jquery.1.7.1']);
		});
		
		// определение модуля 'jquery.1.7.1' с указанным path в обьекте
		define('jquery.1.7.1', {path: 'https://code.jquery.com/jquery-1.7.1.min.js'}, function(scope) {
			console.log('1.7');
			
		
			return (function($) {
				console.log( $.fn );
				return $;
			})(jQuery)

			var a = 10;
			return a;
		});			

		// определение модуля 'menu'
		define('sub-menu', function() {
			var b = 4;
			return b;
		});

	*/			


		
    </script>
  </body>
</html>